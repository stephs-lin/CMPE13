Stephanie Lin slin41@ucsc.edu Collaborated with Christian Deguzman

This lab explores the concept of state machines while also incorporating concepts we learned previously. We are required to create a toaster that has three different modes: bake, toast, broil. Each mode has unique settings of time and temperature. We draw the toaster on the OLED on the board and use the buttons, potentiometer, and LEDS for I/O. There are four different states for this state machine: SETUP, SELECTION_PENDING, COOKING, and RESET_PENDING. We create event checkers which triggers the state machine to move onto the next state. The state machine is the most important concept in this lab since it is the back bone of everything.

I first tried to draw the toaster on the OLED at the 6 different modes, BAKE_ON, TOAST_ON, BROIL_ON, BAKE_OFF, TOAST_OFF, BROIL_OFF to check if I was printing correctly.  Next, I tried to switch between the different modes when pushing the third button. I had trouble with this because I was calling UpdateOLED in main function's while (1) loop. This caused the buffering in between states so therefore the OLED was lagging. Once I removed it, the transition was smooth. Then, I started working on the ADC. At first I tried implementing the same ADC from my lab 6, but it wasn't working. It turns out that I was using floats and was not bit shifting my values. Next, I tried implementing my cooking and resetting state machine. It was simple. Reset automatically went back to setup. I noticed that my OLED began to lag again which was after I implemented the ADC. I am currently trying to figure out why. If I had more time for this lab, I would be able to debug this. However, since I haven't had time to work on this lab, most of my time was consumed by debugging.

Right now, the ADC is lagging the OLED. Everything should be looping. LEDs aren't implemented yet, but I will once I have I fixed the lagging issue. As of 5/23 1:31 AM, the OLED does not lag anymore but the counting down timer decrements by two which I can not figure out at all. The LEDs aren't turning on either even when I add LEDINIT in the main function and add the LED.h. I would do LEDSET(0xFF) outside of the while loop, but it still wouldn't turn on. I honestly have no clue. I've spent mostly lab sections and about 4 hours outside of lab on this lab. I enjoyed doing this lab, but I wish the lab manual was less confusing. There were some typos that were only cleared up by asking the TAs. The points distribution is still harsh. The lab manual covered enough material. 


